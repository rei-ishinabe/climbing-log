<div class="container mt-3">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8">
      <h4>合計本数ランキング</h4>
      <p>ランキングは <%= link_to 'アカウント設定', edit_user_registration_path %> でプロフィールを公開している場合のみ表示されます</p>
      <% @users.each do |user| %>
        <div class="card my-2 d-flex">
          <div class="d-flex align-items-center">
            <div>
              <% if user.image.blank? && user == current_user %>
                <%= link_to edit_user_registration_path do %>
                  <%= image_tag 'no_profile_image_logo.png', size:'80x80', class:'rounded mr-3' %>
                <% end %>
              <% elsif user.image.blank? && user != current_user %>
                <%= image_tag 'no_profile_image_logo.png', size:'80x80', class:'rounded mr-3' %>
              <% else %>
                <%= cl_image_tag user.image, height: 80, width: 80, crop: :fill, class:'rounded mr-3' %>
              <% end %>
            </div>

            <div>
              <div>
                <% if user == current_user %>
                  <%= link_to edit_user_registration_path do %>
                    <span style="font-size: 1.2rem"><%= user.nickname.blank? ? 'ニックネーム未設定' : user.nickname %></span>
                  <% end %>さん
                <% else %>
                  <span style="font-size: 1.2rem"><%= user.nickname.blank? ? 'ニックネーム未設定' : user.nickname %></span>さん
                <% end %>
                合計本数 <span style="font-size: 1.2rem"><%= user.logs.count %></span>
              </div>
              <div>
                ボルダー最高グレード: <%= user.best_boulder_sent.combined_grade unless user.best_boulder_sent.nil? %>
              </div>
              <div>
                リード最高グレード: <%= user.best_lead_sent.combined_grade unless user.best_lead_sent.nil?  %>
              </div>
            </div>
          </div>

        </div>
      <% end %>
    </div>
  </div>
</div>

